{"ast":null,"code":"import _assertThisInitialized from\"/Users/michael/django_react_test/django-react-boilerplate/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _classCallCheck from\"/Users/michael/django_react_test/django-react-boilerplate/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/michael/django_react_test/django-react-boilerplate/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/Users/michael/django_react_test/django-react-boilerplate/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/michael/django_react_test/django-react-boilerplate/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import ReactDOM from\"react-dom\";import\"./index.css\";import\"semantic-ui-css/semantic.min.css\";import img_up from\"./Image/up.png\";import img_hole from\"./Image/hole.png\";import img_generate from\"./Image/generate.png\";import img_revert from\"./Image/revert.png\";import img_next from\"./Image/next.png\";function Grid(props){var img;if(props.value===1){img=img_up;}else if(props.value===0){img=img_hole;}else{img=img_hole;}return/*#__PURE__*/React.createElement(\"button\",{className:\"grid\",onClick:props.onClick},/*#__PURE__*/React.createElement(\"img\",{className:\"img\",src:img,alt:\"\"}));}function Grid2(props){var img;if(props.value===1){img=img_up;}else if(props.value===0){img=img_hole;}else{img=img_hole;}return/*#__PURE__*/React.createElement(\"button\",{className:\"grid2\",onClick:props.onClick},/*#__PURE__*/React.createElement(\"img\",{className:\"img2\",src:img,alt:\"\"}));}function Grid3(props){var img;if(props.value===1){img=img_up;}else if(props.value===0){img=img_hole;}else{img=img_hole;}return/*#__PURE__*/React.createElement(\"button\",{className:\"grid3\",onClick:props.onClick},/*#__PURE__*/React.createElement(\"img\",{className:\"img3\",src:img,alt:\"\"}));}function Grid5(props){var img;if(props.value===1){img=img_up;}else if(props.value===0){img=img_hole;}else{img=img_hole;}return/*#__PURE__*/React.createElement(\"button\",{className:\"grid5\",onClick:props.onClick},/*#__PURE__*/React.createElement(\"img\",{className:\"img5\",src:img,alt:\"\"}));}function Grid6(props){var img;if(props.value===1){img=img_up;}else if(props.value===0){img=img_hole;}else{img=img_hole;}return/*#__PURE__*/React.createElement(\"button\",{className:\"grid6\",onClick:props.onClick},/*#__PURE__*/React.createElement(\"img\",{className:\"img6\",src:img,alt:\"\"}));}function Grid7(props){var img;if(props.value===1){img=img_up;}else if(props.value===0){img=img_hole;}else{img=img_hole;}return/*#__PURE__*/React.createElement(\"button\",{className:\"grid7\",onClick:props.onClick},/*#__PURE__*/React.createElement(\"img\",{className:\"img7\",src:img,alt:\"\"}));}function Grid8(props){var img;if(props.value===1){img=img_up;}else if(props.value===0){img=img_hole;}else{img=img_hole;}return/*#__PURE__*/React.createElement(\"button\",{className:\"grid8\",onClick:props.onClick},/*#__PURE__*/React.createElement(\"img\",{className:\"img8\",src:img,alt:\"\"}));}function Grid9(props){var img;if(props.value===1){img=img_up;}else if(props.value===0){img=img_hole;}else{img=img_hole;}return/*#__PURE__*/React.createElement(\"button\",{className:\"grid9\",onClick:props.onClick},/*#__PURE__*/React.createElement(\"img\",{className:\"img9\",src:img,alt:\"\"}));}var Board=/*#__PURE__*/function(_React$Component){_inherits(Board,_React$Component);var _super=_createSuper(Board);function Board(){_classCallCheck(this,Board);return _super.apply(this,arguments);}_createClass(Board,[{key:\"renderGrid\",value:function renderGrid(i,j,key_j,dimension){var _this=this;if(dimension===4){return/*#__PURE__*/React.createElement(Grid,{key:key_j,value:this.props.grids[i][j],onClick:function onClick(){return _this.props.onClick(i,j);}});}else if(dimension===2){return/*#__PURE__*/React.createElement(Grid2,{key:key_j,value:this.props.grids[i][j],onClick:function onClick(){return _this.props.onClick(i,j);}});}else if(dimension===3){return/*#__PURE__*/React.createElement(Grid3,{key:key_j,value:this.props.grids[i][j],onClick:function onClick(){return _this.props.onClick(i,j);}});}else if(dimension===5){return/*#__PURE__*/React.createElement(Grid5,{key:key_j,value:this.props.grids[i][j],onClick:function onClick(){return _this.props.onClick(i,j);}});}else if(dimension===6){return/*#__PURE__*/React.createElement(Grid6,{key:key_j,value:this.props.grids[i][j],onClick:function onClick(){return _this.props.onClick(i,j);}});}else if(dimension===7){return/*#__PURE__*/React.createElement(Grid7,{key:key_j,value:this.props.grids[i][j],onClick:function onClick(){return _this.props.onClick(i,j);}});}else if(dimension===8){return/*#__PURE__*/React.createElement(Grid8,{key:key_j,value:this.props.grids[i][j],onClick:function onClick(){return _this.props.onClick(i,j);}});}else if(dimension===9){return/*#__PURE__*/React.createElement(Grid9,{key:key_j,value:this.props.grids[i][j],onClick:function onClick(){return _this.props.onClick(i,j);}});}}},{key:\"render\",value:function render(){var _this2=this;var grids=new Array(this.props.dimension);for(var i=0;i<this.props.dimension;i++){grids[i]=new Array(this.props.dimension).fill(null);}var gridsUI=grids.map(function(row,i){return/*#__PURE__*/React.createElement(\"div\",{key:i,className:\"board-row\"},row.map(function(grid,j){return _this2.renderGrid(i,j,j,_this2.props.dimension);}));});return/*#__PURE__*/React.createElement(\"div\",null,gridsUI);}}]);return Board;}(React.Component);var Game=/*#__PURE__*/function(_React$Component2){_inherits(Game,_React$Component2);var _super2=_createSuper(Game);function Game(props){var _this3;_classCallCheck(this,Game);_this3=_super2.call(this,props);var dimension=4;var grids=new Array(dimension);for(var i=0;i<dimension;i++){grids[i]=new Array(dimension).fill(null);}var current={grids:grids,legal_actions:[],stepNumber:0};var new_current=RandomGenerate(current,dimension);_this3.state={dimension:dimension,history:[new_current],historyNumber:0,showMenu:false};_this3.showMenu=_this3.showMenu.bind(_assertThisInitialized(_this3));_this3.closeMenu=_this3.closeMenu.bind(_assertThisInitialized(_this3));return _this3;}_createClass(Game,[{key:\"handleClick\",value:function handleClick(i,j){var history=this.state.history.slice(0,this.state.historyNumber+1);var current=history[history.length-1];var grids=current.grids.slice();if(IsWin(grids,this.state.dimension)||grids[i][j]!==1){return;}var new_current=OnDoAction(current,i,j);this.setState({history:history.concat([new_current]),historyNumber:history.length});return;}},{key:\"jumpTo\",value:function jumpTo(move){this.setState({historyNumber:move});}},{key:\"getCurrent\",value:function getCurrent(){return this.state.history[this.state.history.length-1];}},{key:\"changeDimension\",value:function changeDimension(dimension){var _this4=this;var grids=new Array(dimension);for(var i=0;i<dimension;i++){grids[i]=new Array(dimension).fill(null);}var current={grids:grids,legal_actions:[],stepNumber:0};var new_current=RandomGenerate(current,dimension);this.setState({dimension:dimension,history:[new_current],historyNumber:0,showMenu:false},function(){document.removeEventListener(\"click\",_this4.closeMenu);});}},{key:\"showMenu\",value:function showMenu(event){var _this5=this;event.preventDefault();this.setState({showMenu:true},function(){document.addEventListener(\"click\",_this5.closeMenu);});}},{key:\"closeMenu\",value:function closeMenu(){var _this6=this;this.setState({showMenu:false},function(){document.removeEventListener(\"click\",_this6.closeMenu);});}},{key:\"render\",value:function render(){var _this7=this;var history=this.state.history;var current=history[this.state.historyNumber];var win=IsWin(current.grids,this.state.dimension);var moves=history.map(function(step,move){var desc=move?\"Go to history #\"+move:\"Go to game start\";return/*#__PURE__*/React.createElement(\"li\",{key:move},/*#__PURE__*/React.createElement(\"button\",{style:{fontSize:\"15px\",width:\"100%\",border:HighlightHistory(_this7.state.historyNumber,move)},id:\"history\",onClick:function onClick(){_this7.jumpTo(move);}},desc));});var status_step,status_history;if(win){status_step=\"Win! Step used: \"+this.state.history[this.state.historyNumber].stepNumber;}else{status_step=\"Steps used: \"+this.state.history[this.state.historyNumber].stepNumber;}status_history=\"Now at history #\"+this.state.historyNumber;return/*#__PURE__*/React.createElement(\"div\",{className:\"game\"},/*#__PURE__*/React.createElement(\"div\",{className:\"game-board\"},/*#__PURE__*/React.createElement(Board,{grids:current.grids,onClick:function onClick(i,j){return _this7.handleClick(i,j);},dimension:this.state.dimension})),/*#__PURE__*/React.createElement(\"div\",{className:\"game-control\"},/*#__PURE__*/React.createElement(\"button\",{className:\"grid\",onClick:function onClick(){var history=_this7.state.history.slice(0,_this7.state.historyNumber+1);var current=history[history.length-1];var new_current=RandomGenerate(current);_this7.setState({history:history.concat(new_current),historyNumber:history.length});}},/*#__PURE__*/React.createElement(\"img\",{className:\"img\",src:img_generate,alt:\"\"})),/*#__PURE__*/React.createElement(\"button\",{className:\"grid\",onClick:function onClick(){_this7.jumpTo(_this7.state.historyNumber===0?0:_this7.state.historyNumber-1);}},/*#__PURE__*/React.createElement(\"img\",{className:\"img\",src:img_revert,alt:\"\"})),/*#__PURE__*/React.createElement(\"button\",{className:\"grid\",onClick:function onClick(){_this7.jumpTo(_this7.state.historyNumber===_this7.state.history.length-1?_this7.state.historyNumber:_this7.state.historyNumber+1);}},/*#__PURE__*/React.createElement(\"img\",{className:\"img\",src:img_next,alt:\"\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{onClick:this.showMenu},\"Change dimension\"),this.state.showMenu?/*#__PURE__*/React.createElement(\"div\",{className:\"menu\"},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return _this7.changeDimension(2);}},\" 2 x 2 \"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return _this7.changeDimension(3);}},\" 3 x 3 \"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return _this7.changeDimension(4);}},\" 4 x 4\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return _this7.changeDimension(5);}},\" 5 x 5\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return _this7.changeDimension(6);}},\" 6 x 6\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return _this7.changeDimension(7);}},\" 7 x 7\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return _this7.changeDimension(8);}},\" 8 x 8\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return _this7.changeDimension(9);}},\" 9 x 9\")):null)),/*#__PURE__*/React.createElement(\"div\",{className:\"game-info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"status\"},status_step),/*#__PURE__*/React.createElement(\"div\",{className:\"status\"},status_history),/*#__PURE__*/React.createElement(\"ol\",null,moves)));}}]);return Game;}(React.Component);function HighlightHistory(historyNumber,move){if(historyNumber===move){return\"4px solid #8c8b4b\";}}function DeepCopyCurrent(current){var g=current.grids.map(function(row){return row.slice();});var l=current.legal_actions.slice();var new_current={grids:g,legal_actions:l,stepNumber:current.stepNumber};return new_current;}function IsWin(grids,dimension){for(var i=0;i<dimension;i++){for(var j=0;j<dimension;j++){if(grids[i][j]!==0){return false;}}}return true;}/*function getRandomInt(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive\n}*/function RandomGenerate(current){var new_current=DeepCopyCurrent(current);var grids=new_current.grids;var legal_actions=new_current.legal_actions;for(var i=0;i<grids.length;i++){for(var j=0;j<grids.length;j++){var r=Math.random();if(r<0.5){grids[i][j]=1;legal_actions.push([i,j]);}else{grids[i][j]=0;}}}new_current.stepNumber=0;return new_current;}function OnDoAction(current,row,column){var dimension=current.grids.length;var new_current=DeepCopyCurrent(current);var grids=new_current.grids;var legal_actions=new_current.legal_actions;grids[row][column]=0;if(row-1!==-1){if(grids[row-1][column]===1){grids[row-1][column]=0;legal_actions=legal_actions.filter(function(item){return item[0]===row-1&&item[1]===column;});}else{grids[row-1][column]=1;legal_actions.push([row-1,column]);}}if(column+1!==dimension){if(grids[row][column+1]===1){grids[row][column+1]=0;legal_actions=legal_actions.filter(function(item){return item[0]===row&&item[1]===column+1;});}else{grids[row][column+1]=1;legal_actions.push([row,column+1]);}}if(row+1!==dimension){if(grids[row+1][column]===1){grids[row+1][column]=0;legal_actions=legal_actions.filter(function(item){return item[0]===row+1&&item[1]===column;});}else{grids[row+1][column]=1;legal_actions.push([row+1,column]);}}if(column-1!==-1){if(grids[row][column-1]===1){grids[row][column-1]=0;legal_actions=legal_actions.filter(function(item){return item[0]===row&&item[1]===column-1;});}else{grids[row][column-1]=1;legal_actions.push([row,column-1]);}}new_current.stepNumber=new_current.stepNumber+1;return new_current;}// ========================================\nReactDOM.render(/*#__PURE__*/React.createElement(Game,null),document.getElementById(\"root\"));","map":{"version":3,"sources":["/Users/michael/django_react_test/django-react-boilerplate/src/index.js"],"names":["React","ReactDOM","img_up","img_hole","img_generate","img_revert","img_next","Grid","props","img","value","onClick","Grid2","Grid3","Grid5","Grid6","Grid7","Grid8","Grid9","Board","i","j","key_j","dimension","grids","Array","fill","gridsUI","map","row","grid","renderGrid","Component","Game","current","legal_actions","stepNumber","new_current","RandomGenerate","state","history","historyNumber","showMenu","bind","closeMenu","slice","length","IsWin","OnDoAction","setState","concat","move","document","removeEventListener","event","preventDefault","addEventListener","win","moves","step","desc","fontSize","width","border","HighlightHistory","jumpTo","status_step","status_history","handleClick","changeDimension","DeepCopyCurrent","g","l","r","Math","random","push","column","filter","item","render","getElementById"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"semantic-ui-css/semantic.min.css\";\nimport img_up from \"./Image/up.png\";\nimport img_hole from \"./Image/hole.png\";\nimport img_generate from \"./Image/generate.png\";\nimport img_revert from \"./Image/revert.png\";\nimport img_next from \"./Image/next.png\";\n\nfunction Grid(props) {\n  var img;\n  if (props.value === 1) {\n    img = img_up;\n  } else if (props.value === 0) {\n    img = img_hole;\n  } else {\n    img = img_hole;\n  }\n  return (\n    <button className=\"grid\" onClick={props.onClick}>\n      <img className=\"img\" src={img} alt=\"\" />\n    </button>\n  );\n}\nfunction Grid2(props) {\n  var img;\n  if (props.value === 1) {\n    img = img_up;\n  } else if (props.value === 0) {\n    img = img_hole;\n  } else {\n    img = img_hole;\n  }\n  return (\n    <button className=\"grid2\" onClick={props.onClick}>\n      <img className=\"img2\" src={img} alt=\"\" />\n    </button>\n  );\n}\nfunction Grid3(props) {\n  var img;\n  if (props.value === 1) {\n    img = img_up;\n  } else if (props.value === 0) {\n    img = img_hole;\n  } else {\n    img = img_hole;\n  }\n  return (\n    <button className=\"grid3\" onClick={props.onClick}>\n      <img className=\"img3\" src={img} alt=\"\" />\n    </button>\n  );\n}\nfunction Grid5(props) {\n  var img;\n  if (props.value === 1) {\n    img = img_up;\n  } else if (props.value === 0) {\n    img = img_hole;\n  } else {\n    img = img_hole;\n  }\n  return (\n    <button className=\"grid5\" onClick={props.onClick}>\n      <img className=\"img5\" src={img} alt=\"\" />\n    </button>\n  );\n}\nfunction Grid6(props) {\n  var img;\n  if (props.value === 1) {\n    img = img_up;\n  } else if (props.value === 0) {\n    img = img_hole;\n  } else {\n    img = img_hole;\n  }\n  return (\n    <button className=\"grid6\" onClick={props.onClick}>\n      <img className=\"img6\" src={img} alt=\"\" />\n    </button>\n  );\n}\nfunction Grid7(props) {\n  var img;\n  if (props.value === 1) {\n    img = img_up;\n  } else if (props.value === 0) {\n    img = img_hole;\n  } else {\n    img = img_hole;\n  }\n  return (\n    <button className=\"grid7\" onClick={props.onClick}>\n      <img className=\"img7\" src={img} alt=\"\" />\n    </button>\n  );\n}\nfunction Grid8(props) {\n  var img;\n  if (props.value === 1) {\n    img = img_up;\n  } else if (props.value === 0) {\n    img = img_hole;\n  } else {\n    img = img_hole;\n  }\n  return (\n    <button className=\"grid8\" onClick={props.onClick}>\n      <img className=\"img8\" src={img} alt=\"\" />\n    </button>\n  );\n}\nfunction Grid9(props) {\n  var img;\n  if (props.value === 1) {\n    img = img_up;\n  } else if (props.value === 0) {\n    img = img_hole;\n  } else {\n    img = img_hole;\n  }\n  return (\n    <button className=\"grid9\" onClick={props.onClick}>\n      <img className=\"img9\" src={img} alt=\"\" />\n    </button>\n  );\n}\n\nclass Board extends React.Component {\n  renderGrid(i, j, key_j, dimension) {\n    if (dimension === 4) {\n      return (\n        <Grid\n          key={key_j}\n          value={this.props.grids[i][j]}\n          onClick={() => this.props.onClick(i, j)}\n        />\n      );\n    } else if (dimension === 2) {\n      return (\n        <Grid2\n          key={key_j}\n          value={this.props.grids[i][j]}\n          onClick={() => this.props.onClick(i, j)}\n        />\n      );\n    } else if (dimension === 3) {\n      return (\n        <Grid3\n          key={key_j}\n          value={this.props.grids[i][j]}\n          onClick={() => this.props.onClick(i, j)}\n        />\n      );\n    } else if (dimension === 5) {\n      return (\n        <Grid5\n          key={key_j}\n          value={this.props.grids[i][j]}\n          onClick={() => this.props.onClick(i, j)}\n        />\n      );\n    } else if (dimension === 6) {\n      return (\n        <Grid6\n          key={key_j}\n          value={this.props.grids[i][j]}\n          onClick={() => this.props.onClick(i, j)}\n        />\n      );\n    } else if (dimension === 7) {\n      return (\n        <Grid7\n          key={key_j}\n          value={this.props.grids[i][j]}\n          onClick={() => this.props.onClick(i, j)}\n        />\n      );\n    } else if (dimension === 8) {\n      return (\n        <Grid8\n          key={key_j}\n          value={this.props.grids[i][j]}\n          onClick={() => this.props.onClick(i, j)}\n        />\n      );\n    } else if (dimension === 9) {\n      return (\n        <Grid9\n          key={key_j}\n          value={this.props.grids[i][j]}\n          onClick={() => this.props.onClick(i, j)}\n        />\n      );\n    }\n  }\n\n  render() {\n    const grids = new Array(this.props.dimension);\n    for (let i = 0; i < this.props.dimension; i++) {\n      grids[i] = new Array(this.props.dimension).fill(null);\n    }\n    const gridsUI = grids.map((row, i) => {\n      return (\n        <div key={i} className=\"board-row\">\n          {row.map((grid, j) => {\n            return this.renderGrid(i, j, j, this.props.dimension);\n          })}\n        </div>\n      );\n    });\n\n    return <div>{gridsUI}</div>;\n  }\n}\n\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n    var dimension = 4;\n    const grids = new Array(dimension);\n    for (let i = 0; i < dimension; i++)\n      grids[i] = new Array(dimension).fill(null);\n    const current = {\n      grids: grids,\n      legal_actions: [],\n      stepNumber: 0,\n    };\n    const new_current = RandomGenerate(current, dimension);\n\n    this.state = {\n      dimension: dimension,\n\n      history: [new_current],\n      historyNumber: 0,\n\n      showMenu: false,\n    };\n\n    this.showMenu = this.showMenu.bind(this);\n    this.closeMenu = this.closeMenu.bind(this);\n  }\n  handleClick(i, j) {\n    const history = this.state.history.slice(0, this.state.historyNumber + 1);\n    const current = history[history.length - 1];\n    const grids = current.grids.slice();\n    if (IsWin(grids, this.state.dimension) || grids[i][j] !== 1) {\n      return;\n    }\n    const new_current = OnDoAction(current, i, j);\n\n    this.setState({\n      history: history.concat([new_current]),\n      historyNumber: history.length,\n    });\n    return;\n  }\n\n  jumpTo(move) {\n    this.setState({\n      historyNumber: move,\n    });\n  }\n\n  getCurrent() {\n    return this.state.history[this.state.history.length - 1];\n  }\n\n  changeDimension(dimension) {\n    const grids = new Array(dimension);\n    for (let i = 0; i < dimension; i++)\n      grids[i] = new Array(dimension).fill(null);\n    const current = {\n      grids: grids,\n      legal_actions: [],\n      stepNumber: 0,\n    };\n    const new_current = RandomGenerate(current, dimension);\n\n    this.setState(\n      {\n        dimension: dimension,\n\n        history: [new_current],\n        historyNumber: 0,\n\n        showMenu: false,\n      },\n      () => {\n        document.removeEventListener(\"click\", this.closeMenu);\n      }\n    );\n  }\n\n  showMenu(event) {\n    event.preventDefault();\n\n    this.setState({ showMenu: true }, () => {\n      document.addEventListener(\"click\", this.closeMenu);\n    });\n  }\n\n  closeMenu() {\n    this.setState({ showMenu: false }, () => {\n      document.removeEventListener(\"click\", this.closeMenu);\n    });\n  }\n\n  render() {\n    const history = this.state.history;\n    const current = history[this.state.historyNumber];\n    const win = IsWin(current.grids, this.state.dimension);\n\n    const moves = history.map((step, move) => {\n      const desc = move ? \"Go to history #\" + move : \"Go to game start\";\n      return (\n        <li key={move}>\n          <button\n            style={{\n              fontSize: \"15px\",\n              width: \"100%\",\n              border: HighlightHistory(this.state.historyNumber, move),\n            }}\n            id=\"history\"\n            onClick={() => {\n              this.jumpTo(move);\n            }}\n          >\n            {desc}\n          </button>\n        </li>\n      );\n    });\n\n    let status_step, status_history;\n    if (win) {\n      status_step =\n        \"Win! Step used: \" +\n        this.state.history[this.state.historyNumber].stepNumber;\n    } else {\n      status_step =\n        \"Steps used: \" +\n        this.state.history[this.state.historyNumber].stepNumber;\n    }\n    status_history = \"Now at history #\" + this.state.historyNumber;\n\n    return (\n      <div className=\"game\">\n        <div className=\"game-board\">\n          <Board\n            grids={current.grids}\n            onClick={(i, j) => this.handleClick(i, j)}\n            dimension={this.state.dimension}\n          />\n        </div>\n        <div className=\"game-control\">\n          <button\n            className=\"grid\"\n            onClick={() => {\n              const history = this.state.history.slice(\n                0,\n                this.state.historyNumber + 1\n              );\n              const current = history[history.length - 1];\n              const new_current = RandomGenerate(current);\n              this.setState({\n                history: history.concat(new_current),\n                historyNumber: history.length,\n              });\n            }}\n          >\n            <img className=\"img\" src={img_generate} alt=\"\" />\n          </button>\n          <button\n            className=\"grid\"\n            onClick={() => {\n              this.jumpTo(\n                this.state.historyNumber === 0\n                  ? 0\n                  : this.state.historyNumber - 1\n              );\n            }}\n          >\n            <img className=\"img\" src={img_revert} alt=\"\" />\n          </button>\n          <button\n            className=\"grid\"\n            onClick={() => {\n              this.jumpTo(\n                this.state.historyNumber === this.state.history.length - 1\n                  ? this.state.historyNumber\n                  : this.state.historyNumber + 1\n              );\n            }}\n          >\n            <img className=\"img\" src={img_next} alt=\"\" />\n          </button>\n\n          <div>\n            <button onClick={this.showMenu}>Change dimension</button>\n\n            {this.state.showMenu ? (\n              <div className=\"menu\">\n                <button onClick={() => this.changeDimension(2)}> 2 x 2 </button>\n                <button onClick={() => this.changeDimension(3)}> 3 x 3 </button>\n                <button onClick={() => this.changeDimension(4)}> 4 x 4</button>\n                <button onClick={() => this.changeDimension(5)}> 5 x 5</button>\n                <button onClick={() => this.changeDimension(6)}> 6 x 6</button>\n                <button onClick={() => this.changeDimension(7)}> 7 x 7</button>\n                <button onClick={() => this.changeDimension(8)}> 8 x 8</button>\n                <button onClick={() => this.changeDimension(9)}> 9 x 9</button>\n              </div>\n            ) : null}\n          </div>\n        </div>\n        <div className=\"game-info\">\n          <div className=\"status\">{status_step}</div>\n          <div className=\"status\">{status_history}</div>\n          <ol>{moves}</ol>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction HighlightHistory(historyNumber, move) {\n  if (historyNumber === move) {\n    return \"4px solid #8c8b4b\";\n  }\n}\n\nfunction DeepCopyCurrent(current) {\n  const g = current.grids.map((row) => {\n    return row.slice();\n  });\n  const l = current.legal_actions.slice();\n  const new_current = {\n    grids: g,\n    legal_actions: l,\n    stepNumber: current.stepNumber,\n  };\n  return new_current;\n}\n\nfunction IsWin(grids, dimension) {\n  for (let i = 0; i < dimension; i++) {\n    for (let j = 0; j < dimension; j++) {\n      if (grids[i][j] !== 0) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\n/*function getRandomInt(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive\n}*/\n\nfunction RandomGenerate(current) {\n  var new_current = DeepCopyCurrent(current);\n\n  const grids = new_current.grids;\n  var legal_actions = new_current.legal_actions;\n  for (let i = 0; i < grids.length; i++) {\n    for (let j = 0; j < grids.length; j++) {\n      const r = Math.random();\n      if (r < 0.5) {\n        grids[i][j] = 1;\n        legal_actions.push([i, j]);\n      } else {\n        grids[i][j] = 0;\n      }\n    }\n  }\n  new_current.stepNumber = 0;\n\n  return new_current;\n}\n\nfunction OnDoAction(current, row, column) {\n  const dimension = current.grids.length;\n  const new_current = DeepCopyCurrent(current);\n  const grids = new_current.grids;\n  var legal_actions = new_current.legal_actions;\n\n  grids[row][column] = 0;\n\n  if (row - 1 !== -1) {\n    if (grids[row - 1][column] === 1) {\n      grids[row - 1][column] = 0;\n      legal_actions = legal_actions.filter(\n        (item) => item[0] === row - 1 && item[1] === column\n      );\n    } else {\n      grids[row - 1][column] = 1;\n      legal_actions.push([row - 1, column]);\n    }\n  }\n  if (column + 1 !== dimension) {\n    if (grids[row][column + 1] === 1) {\n      grids[row][column + 1] = 0;\n      legal_actions = legal_actions.filter(\n        (item) => item[0] === row && item[1] === column + 1\n      );\n    } else {\n      grids[row][column + 1] = 1;\n      legal_actions.push([row, column + 1]);\n    }\n  }\n  if (row + 1 !== dimension) {\n    if (grids[row + 1][column] === 1) {\n      grids[row + 1][column] = 0;\n      legal_actions = legal_actions.filter(\n        (item) => item[0] === row + 1 && item[1] === column\n      );\n    } else {\n      grids[row + 1][column] = 1;\n      legal_actions.push([row + 1, column]);\n    }\n  }\n  if (column - 1 !== -1) {\n    if (grids[row][column - 1] === 1) {\n      grids[row][column - 1] = 0;\n      legal_actions = legal_actions.filter(\n        (item) => item[0] === row && item[1] === column - 1\n      );\n    } else {\n      grids[row][column - 1] = 1;\n      legal_actions.push([row, column - 1]);\n    }\n  }\n  new_current.stepNumber = new_current.stepNumber + 1;\n\n  return new_current;\n}\n\n// ========================================\n\nReactDOM.render(<Game />, document.getElementById(\"root\"));\n"]},"metadata":{},"sourceType":"module"}